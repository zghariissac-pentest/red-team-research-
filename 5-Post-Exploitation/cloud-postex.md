# Cloud post-exploitation

Cloud post-exploitation focuses on expanding access, discovering sensitive resources, and maintaining presence inside cloud environments after initial compromise. The goal is to understand how identity, permissions, and cloud services interact so you can move with stealth and precision.

## Understanding cloud identity

The most important concept in cloud environments is identity. Almost everything depends on what an identity can or cannot access.

#### Key elements:

Users

Service accounts

Roles and groups

Policies and permissions

Tokens and temporary credentials

Compromise usually gives you one identity. Effective post-exploitation means turning that identity into more access.

## Enumerating permissions

After gaining an identity, the first step is to check what permissions it has. Cloud providers expose very large permission sets, and privilege escalation paths often hide in small, indirect capabilities.

#### Focus on:

Listing roles

Listing attached policies

Checking resource-level permissions

Enumerating trust relationships

Searching for wildcard permissions

Searching for misconfigured custom roles

##### Common issues:

Roles with excessive permissions

Policies that allow privilege escalation

Inherited permissions from groups

Hidden access through service accounts

## Credential harvesting

Cloud platforms generate credentials automatically, and many services store secrets insecurely. These credentials allow lateral movement or privilege escalation.

### Targets:

Access keys

API tokens

Refresh tokens

Service account keys

Secrets stored in metadata endpoints

Secrets stored in secret managers with weak access control

Keys stored in instance profiles or container roles

### Practical sources:

Instance metadata

CI pipelines

Container environments

Misconfigured virtual machines

Developer environments synced to cloud storage

### Lateral movement paths

Movement inside cloud environments is different from traditional networks. Instead of network paths, you pivot through identity and service relationships.

#### Common paths:

Switching roles that trust the compromised identity

Using access keys to impersonate other services

Assuming cross-account roles 

Pivoting via serverless functions

Abusing cloud-managed identities

Using keys found inside storage buckets or configuration files

Your goal is to map how identities trust each other, then follow those trust paths.

## Privilege escalation in the cloud

Privilege escalation usually happens through misconfigured policies.

### Typical patterns:

Users allowed to attach new policies to themselves

Roles allowed to assume administrator roles

Functions or VMs allowed to read sensitive secrets

Ability to create new compute instances with elevated profiles

Over-permissive service accounts

Write access to IAM roles or policy documents

Cloud privilege escalation is often fast once the right misconfiguration is found.

Persistence techniques

Maintaining a foothold in a cloud environment focuses on identity, logging, and automation components.

### Common persistence methods:

Creating or modifying roles for later use

Adding hidden access keys

Deploying new service accounts

Placing payloads inside serverless functions

Modifying startup scripts for VMs

Creating automation rules that trigger malicious executions

Cloud persistence should always blend with normal infrastructure patterns to avoid detection.

## Data discovery

Cloud environments store large amounts of sensitive information. The goal is to identify valuable data without triggering alerts.

#### Common locations:

Object storage buckets

Database instances

Secrets managers

DevOps pipelines

File sync services

Backup snapshots

Logging storage

Always prioritize reading metadata instead of touching files directly.

Avoiding detection

Cloud providers have strong logging systems. Avoiding detection requires minimizing noise and avoiding suspicious actions.

### Key points:

Avoid enabling new regions

Do not list all resources in a single large request

Avoid modifying policies unless necessary

Use existing roles instead of creating new ones

Blend activity with common service behavior

Minimize console logins

Prefer API calls over UI actions

### Example workflow

Enumerate identity

Map permissions

Enumerate secrets

Identify pivot paths

Assume new roles

Access data storage

Expand to other services

Set minimal persistence

Maintain low-profile operations
